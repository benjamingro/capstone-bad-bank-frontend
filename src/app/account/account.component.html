<!-- #region initial log in screen -->
<div class="row w-100" *ngIf="!isLoggedIn && !createAccountFromScratch_State && !signInWithMyEmail_State">
    <div class="col-lg-4"></div>
    <div class="col-lg-4 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-body">
                <div class="row w-100 mb-4">
                    <div class="col-lg-6 py-2 d-flex justify-content-center">
                        <!-- sign in with email -->
                        <button class="btn btn-secondary me-3 my-1" style="min-width:180px; "
                            (click)="signInWithMyEmail_State = true">
                            <fa-icon [icon]="faEnvelope" style="" class="ms-1 me-2"></fa-icon>Sign in with email
                        </button>
                    </div>
                    <div class="col-lg-6 py-2 d-flex justify-content-center">
                        <!-- sign in with google -->
                        <button class="btn btn-secondary my-1" (click)="signInWithGoogle_submit()">
                            <fa-icon [icon]="faGoogle" style="" class="ms-1 me-2"></fa-icon>Sign in
                            with&nbsp;<b>Google</b>
                        </button>
                    </div>
                </div>
                <div class="row w-100">
                    <div class="col d-flex justify-content-center">
                        <!-- Create account -->
                        <button type="button" class="btn btn-link" (click)="createAccountFromScratch_initial()">Create
                            new account</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4"></div>
</div>


<!-- #endregion -->

<!-- #region create account from scratch screen -->
<div class="row w-100"
    *ngIf="!isLoggedIn && createAccountFromScratch_State && !createAccountSuccess_State && !busy">
    <div class="col-lg-3"></div>
    <div class="col-lg-6 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-header">
                Create an account
            </div>
            <div class="card-body">
                <form class="needs-validation" novalidate [formGroup]="createAccountFromScratch_Form"
                    (ngSubmit)="onSubmit()">
                    <!-- #region first name last name -->
                    <label class="text-secondary">First name</label>
                    <input type="text" class="form-control" placeholder="First name" formControlName="firstName"
                        required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="firstName?.invalid && createAccountFromScratch_Form_submitted">
                            First name is required
                        </div>
                        <div class="col"
                            *ngIf="(firstName?.valid && createAccountFromScratch_Form_submitted) || !createAccountFromScratch_Form_submitted">
                            &nbsp;
                        </div>
                    </div>

                    <label class="text-secondary">Last name</label>
                    <input type="text" class="form-control" placeholder="Last name" formControlName="lastName" required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="lastName?.invalid && createAccountFromScratch_Form_submitted">
                            Last name is required
                        </div>
                        <div class="col"
                            *ngIf="(lastName?.valid && createAccountFromScratch_Form_submitted) || !createAccountFromScratch_Form_submitted">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region email password input row -->
                    <label class="text-secondary">Email</label>
                    <input type="email" class="form-control" id="validationCustom01" placeholder="Email"
                        formControlName="email" required>
                    <div class="row w-100">
                        <div class="col text-danger" *ngIf="email?.invalid && createAccountFromScratch_Form_submitted">
                            Email is required
                        </div>
                        <div class="col"
                            *ngIf="(email?.valid && createAccountFromScratch_Form_submitted) || !createAccountFromScratch_Form_submitted">
                            &nbsp;
                        </div>
                    </div>

                    <label class="text-secondary">Password</label>
                    <input type="text" class="form-control" id="validationCustom02" placeholder="Password"
                        formControlName="password" required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="password?.invalid && createAccountFromScratch_Form_submitted">
                            Password is required
                        </div>
                        <div class="col"
                            *ngIf="(password?.valid && createAccountFromScratch_Form_submitted) || !createAccountFromScratch_Form_submitted">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region telephone number -->
                    <label class="text-secondary">Telephone number</label>
                    <input type="tel" class="form-control" placeholder="Telephone number (optional)"
                        formControlName="telephone">
                    <div class="row w-100">
                        <div class="col">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region login error row -->
                    <div class="row mb-2">
                        <div class="col" *ngIf="error_firebaseAuth==''">&nbsp;</div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/user-not-found'">
                            <span class="text-danger">User not found. </span>Create account.
                        </div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/email-already-in-use'">
                            <span class="text-danger">Email address already in use.</span>
                        </div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/invalid-email'">
                            <span class="text-danger">Invalid email address.</span>
                        </div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/weak-password'">
                            <span class="text-danger">Password is too weak</span>
                        </div>

                    </div>
                    <!-- #endregion -->

                    <!-- #region button row -->
                    <div class="row w-100">
                        <div class="col-lg-6 my-2 d-flex justify-content-center">
                            <button class="btn btn-primary" (click)="createAccountFromScratch_submit()">
                                Create account
                            </button>
                        </div>
                        <div class="col-lg-6 my-2 d-flex justify-content-center">
                            <button class="btn btn-secondary" (click)="createAccountFromScratch_cancel()">
                                Cancel
                            </button>
                        </div>

                    </div>
                    <!-- #endregion -->
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-3"></div>
</div>
<!-- #endregion -->

<!-- #region wait screen -->
<app-busy *ngIf="busy"></app-busy>
<!-- #endregion -->

<!-- #region sign in with email screen -->
<div class="row w-100" *ngIf="signInWithMyEmail_State && !busy">
    <div class="col-lg-4"></div>
    <div class="col-lg-4 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-header">
                <fa-icon [icon]="faEnvelope" style="" class="ms-1 me-2"></fa-icon>Sign in with email
            </div>
            <div class="card-body">
                <form class="needs-validation" novalidate [formGroup]="signInWithEmailForm" (ngSubmit)="onSubmit()">
                    <!-- #region email password input row -->
                    <input type="email" class="form-control" id="validationCustom01" placeholder="Email"
                        formControlName="email" required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="email_signInWithEmail?.invalid && signInWithEmailForm_submitted">
                            Email is required
                        </div>
                        <div class="col"
                            *ngIf="(email_signInWithEmail?.valid && signInWithEmailForm_submitted) || !signInWithEmailForm_submitted">
                            &nbsp;
                        </div>
                    </div>

                    <input type="text" class="form-control" id="validationCustom02" placeholder="Password"
                        formControlName="password" required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="password_signInWithEmail?.invalid && signInWithEmailForm_submitted">
                            Password is required
                        </div>
                        <div class="col"
                            *ngIf="(password_signInWithEmail?.valid && signInWithEmailForm_submitted) || !signInWithEmailForm_submitted">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region login error row -->
                    <div class="row mb-2">
                        <div class="col" *ngIf="error_firebaseAuth==''">&nbsp;</div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/user-not-found'">
                            <span class="text-danger">User not found. </span>Create account.
                        </div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/email-already-in-use'">
                            <span class="text-danger">Email address already in use.</span>
                        </div>
                        <div class="col " *ngIf="error_firebaseAuth=='auth/weak-password'">
                            <span class="text-danger">Password is too weak</span>
                        </div>

                    </div>
                    <!-- #endregion -->

                    <!-- #region new button row -->
                    <button class="btn btn-primary me-3 my-1" style="min-width:180px; "
                        (click)="signInWithEmail_submit()">Log in</button>
                    <button class="btn btn-secondary my-1" (click)="signInWithMyEmail_State=false">
                        Cancel
                    </button>

                    <!-- #endregion -->


                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-4"></div>
</div>
<!-- #endregion -->

<!-- #region create account from google screen -->
<div class="row w-100"
    *ngIf="isLoggedIn && createAccountFromGoogle_State && !createAccountSuccess_State && !busy">
    <div class="col-lg-3"></div>
    <div class="col-lg-6 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-header">
                <b>Welcome to Bad Bank</b>
            </div>
            <div class="card-body">
                <p class="card-text">Please finish setting up your account</p>

                <form class="needs-validation" novalidate [formGroup]="createAccountFromGoogle_Form"
                    (ngSubmit)="onSubmit()">
                    <!-- #region first name last name -->
                    <label class="text-secondary">First name</label>
                    <input type="text" class="form-control" placeholder="First name" formControlName="firstName"
                        required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="firstName_google?.invalid && createAccountFromGoogle_Form_submitted">
                            First name is required
                        </div>
                        <div class="col"
                            *ngIf="(firstName_google?.valid && createAccountFromGoogle_Form_submitted) || !createAccountFromGoogle_Form_submitted">
                            &nbsp;
                        </div>
                    </div>

                    <label class="text-secondary">Last name</label>
                    <input type="text" class="form-control" placeholder="Last name" formControlName="lastName" required>
                    <div class="row w-100">
                        <div class="col text-danger"
                            *ngIf="lastName_google?.invalid && createAccountFromGoogle_Form_submitted">
                            Last name is required
                        </div>
                        <div class="col"
                            *ngIf="(lastName_google?.valid && createAccountFromGoogle_Form_submitted) || !createAccountFromGoogle_Form_submitted">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region telephone number -->
                    <label class="text-secondary">Telephone number</label>
                    <input type="tel" class="form-control" placeholder="Telephone number (optional)"
                        formControlName="telephone">
                    <div class="row w-100">
                        <div class="col">
                            &nbsp;
                        </div>
                    </div>
                    <!-- #endregion -->

                    <!-- #region button row -->
                    <div class="row w-100">
                        <div class="col-lg-6 my-2 d-flex justify-content-center">
                            <button class="btn btn-primary" (click)="createAccountFromGoogle_submit()">
                                Create account
                            </button>
                        </div>
                        <div class="col-lg-6 my-2 d-flex justify-content-center">
                            <button class="btn btn-secondary" (click)="createAccountFromGoogle_cancel()">
                                Cancel
                            </button>
                        </div>

                    </div>
                    <!-- #endregion -->
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-3"></div>
</div>
<!-- #endregion -->


<!-- #region create account success screen -->
<div class="row w-100" *ngIf="createAccountSuccess_State">
    <div class="col-lg-3"></div>
    <div class="col-lg-6 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-body">
                <div class="row w-100 mb-4">
                    <div class="col " style="font-size:1.2rem; ">
                        Welcome to Bad Bank, <span style="font-weight:bold;">{{badBankService.badBankUser?.Fname}}</span>.  
                        <!-- Thank you {{badBankUser?.Fname}} -->

                    </div>

                </div>
                <div class="row w-100 mb-4">
                    <div class="col d-flex">
                        Get started with a {{badBankService.badBankUser?.AccountBalance | currency}} account
                        balance as a welcome gift.
                        <!-- You can get started with a ${{badBankUser?.AccountBalance}} account balance as a welcome gift.  -->

                    </div>

                </div>
                <div class="row w-100">
                    <div class="col d-flex justify-content-center">
                        <button class="btn btn-primary" style="min-width:80px;"
                            (click)="createAccountSuccess_ok()">Ok</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3"></div>
</div>
<!-- #endregion -->

<!-- #region general screen -->
<div class="row w-100" *ngIf="isLoggedIn && !createAccountSuccess_State && !viewTransactionHistory_State && !createAccountFromGoogle_State">
    <div class="col-lg-4"></div>
    <div class="col-lg-4 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-header">
                <div class="row  w-100">
                    <div class="col align-self-center" style="font-weight: bold; font-size: 1.3rem;">
                        Welcome {{badBankService.badBankUser?.Fname}}
                    </div>
                    <div class="col d-flex justify-content-end align-self-center">
                        <span>Account balance:</span>&nbsp;<span
                            style="font-weight:bold;">{{badBankService.badBankUser?.AccountBalance | currency}}</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <a routerLink="/deposit">Deposit</a>
                    </li>
                    <li class="list-group-item">
                        <a routerLink="/withdraw">Withdraw</a>
                    </li>
                    <li class="list-group-item">
                        <a (click)="viewTransactionHistory_State=true" class="lookAlike">View transactions</a>
                    </li>
                    <li class="list-group-item">
                        <a (click)="mySignOut()" class="lookAlike">Logout</a>
                    </li>
                </ul>




            </div>
        </div>
    </div>
    <div class="col-lg-4"></div>
</div>
<!-- #endregion -->

<!-- #region transaction history screen -->
<div class="row w-100" *ngIf="viewTransactionHistory_State">
    <div class="col-lg-3"></div>
    <div class="col-lg-6 pt-4 ps-4 pe-1">
        <div class="card">
            <div class="card-header">
                <div class="row w-100">
                    <div class="col align-self-center py-1" style="font-weight:bold;font-size:1.2rem;">Transaction history</div>
                    <div class="col d-flex justify-content-center align-self-center py-1">
                        Current balance:&nbsp;<b>{{badBankService.badBankUser?.AccountBalance | currency}}</b>
                    </div>
                    <div class="col d-flex justify-content-end align-self-center py-1">
                        <a (click)="viewTransactionHistory_State=false" class="lookAlike" ><fa-icon [icon]="faArrowLeft" style="" class="ms-1 me-2"></fa-icon>&nbsp;&nbsp;Account</a>
                    </div>
                </div>
            </div>
            <div class="card-body tableFixHead">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">
                                Date
                            </th>
                            <th scope="col">
                                Amount
                            </th>
                            <th scope="col">
                                Payor/Payee
                            </th>
                            <th scope="col">
                                Balance
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let transaction of badBankService.badBankUser?.TransactionHistory">
                            <td scope="col">{{transaction.TransactionTime | date}}</td>
                            <td scope="col">{{transaction.TransactionAmount | currency}}</td>
                            <td scope="col">{{transaction.Payee}}</td>
                            <td scope="col">{{transaction.AccountBalanceAfter | currency}}</td>
                        </tr>

                    </tbody>
                </table>
                
            </div>
        </div>
    </div>
    <div class="col-lg-3"></div>

</div>
<!-- #endregion -->
